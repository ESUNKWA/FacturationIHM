<div class="row" >
  <div class="col-md-12">
  <!-- Button trigger modal -->
  <button class="btn btn-primary"
  (click)="openVerticalCenteredModal(verticalCenteredModal)"
  style="float: right;">Nouveau</button>
  <!-- Modal -->
  </div>
  </div>

  <div class="row mt-2" >
    <div class="col-md-12 stretch-card">
      <div class="card">
        <div class="card-body">
          <h6 class="card-title">Liste des produits</h6>
          <div class="table-responsive">
            <table class="table" >
              <thead>
                <tr>
                  <th>Code</th>
                  <th>Nom</th>
                  <th>Ville</th>
                  <th>Quartier</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of data" >
                  <td>{{item.r_code}}</td>
                  <td>{{item.r_nom}}</td>
                  <td>{{(item.r_ville == 1)? 'Abidjan': 'Intérieur'}}</td>
                  <td>{{item.r_quartier}}</td>
                  <td *ngIf=" item.r_status == 0" ><span class="badge badge-pill badge-warning">Compté désactivé</span></td>
                  <td *ngIf=" item.r_status == 1" ><span class="badge badge-pill badge-success">Compté Activé</span></td>
                  <td>
                      <button (click)="openVerticalCenteredModal(verticalCenteredModal);action(item,'edit');" class="btn btn-primary btn-icon"><i class="feather icon-edit"></i></button>&nbsp;
                      <button (click)="openVerticalCenteredModal(verticalCenteredModal);action(item,'views');" class="btn btn-info btn-icon"><i class="feather icon-info"></i></button>&nbsp;
                      <button class="btn btn-danger btn-icon"><i class="feather icon-trash-2"></i></button>

                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


  <ng-template #verticalCenteredModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">{{ modalTitle }}</h5>
      <button type="button" class="close" (click)="modal.close('by: close icon')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <form [formGroup]="produitData">
        <div class="form-group row" >
          <div class="col-sm-6" *ngIf="userInfos.r_profil == 4" >
            <label class="col-form-label styleInput" >Partenaire</label>
            <select class="form-control" aria-label=".form-select-lg example" [(ngModel)]="detailsProduit.r_partenaire" formControlName="p_partenaire">
              <option value="0" selected>---Sélectionnez le partenaire---</option>
              <option value="{{ value.r_i }}"  *ngFor=" let value of partenaires " >{{ value.r_nom }}</option>
            </select>
             <span class="messages"></span>
          </div>
          <!-- <div class="col-sm-6">
            <label class="col-form-label styleInput" >Catégorie</label>
            <select class="form-control" aria-label=".form-select-lg example" formControlName="p_categorie">
              <option value="0" selected>---Sélectionnez la catégorie---</option>
              <option value="{{ value.r_i }}"  *ngFor=" let value of categories " >{{ value.r_libelle }}</option>
            </select>
             <span class="messages"></span>
          </div> -->
        </div>
        <div class="form-group row">
          <div class="col-sm-6">
            <label class="col-form-label styleInput" >Catégorie</label>
            <select class="form-control" aria-label=".form-select-lg example" [(ngModel)]="detailsProduit.r_categorie" formControlName="p_categorie">
              <option value="0" selected>---Sélectionnez la catégorie---</option>
              <option value="{{ value.r_i }}"  *ngFor=" let value of categories " >{{ value.r_libelle }}</option>
            </select>
           </div>
            <div class="col-sm-6">
              <label class="col-form-label">Libellé </label>
                <input type="text" class="form-control" [(ngModel)]="detailsProduit.r_libelle" formControlName="r_libelle" placeholder="">
            </div>
        </div>
        <div class="form-group row">
          <div class="col-sm-6">
            <label class="col-form-label">Stock produit</label>
              <input type="number" min="1" class="form-control" [(ngModel)]="detailsProduit.r_stock" formControlName="p_stock" placeholder="">
              <span class="messages"></span>
          </div>
          <div class="col-sm-6">
            <label class="col-form-label">Prix de vente</label>
              <input type="text" min="1" class="form-control" [(ngModel)]="detailsProduit.r_prix_vente" formControlName="p_prix_vente" placeholder="">
              <span class="messages"></span>
          </div>
      </div>
        <div class="form-group row">
          <div class="col-sm-12">
            <label class="col-sm-2 col-form-label">Description</label>
              <textarea rows="5" cols="5" class="form-control" [(ngModel)]="detailsProduit.r_description" formControlName="p_description" placeholder=""></textarea>
          </div>
        </div>
    </form>

    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.close('by: close button')">Fermer</button>
      <button type="button" class="btn btn-primary" (click)="resgister()">Enregistrer</button>
    </div>
  </ng-template>
